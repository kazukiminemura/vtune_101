# Microarchitecture Exploration
マイクロアーキテクチャ探索は、典型的なクライアントアプリケーションを分析するためのイベントの完全なリストを収集します。  
それにより、指標に使用される一連の事前定義された比率を計算し、ハードウェアレベルのパフォーマンス問題を特定するのに役立ちます。  

## 動作原理
コード名 Ivy Bridge 以降の最新のマイクロアーキテクチャでは、マイクロアーキテクチャ探索分析は、アプリケーション内の主要なパフォーマンスボトルネックを特定するイベントベースの指標の階層的な組織である Top-Down Characterization 方法論を使用した Top-Down Microarchitecture Analysis Method に基づいています。

## パイプラインスロット分析
各サイクルで、各コアは最大4つのパイプラインスロットを有用な操作で埋めることができます。そのため、特定の時間間隔で、その間に埋められ発行された可能性のあるパイプラインスロットの最大数を決定することが可能です。この分析では、その推定を行い、すべてのパイプラインスロットを以下の4つのカテゴリに分類します：

- 発行されリタイアされた有用な作業を含むパイプラインスロット（リタイア済み: Retired）

- 発行されたがキャンセルされた有用な作業を含むパイプラインスロット（誤推測: Bad speculation）

- フロントエンドの問題により有用な作業で埋めることができなかったパイプラインスロット（フロントエンドボトルネック: Front-end Bound）

- バックエンドの遅延により有用な作業で埋めることができなかったパイプラインスロット（バックエンドボトルネック: Back-end Bound）


各指標は、Intel のアーキテクトによって定義されたイベント比率であり、それぞれに事前定義された閾値があります。VTune Profiler は、各集約されたプログラム単位（例えば、関数）に対する比率値を分析します。この値が閾値を超え、さらにそのプログラム単位が収集された CPU 時間の 5%以上の CPU 時間を持つ場合、それは潜在的なパフォーマンス問題を示唆し、そのような値をピンクで強調表示します。

## 使用方法
```
ONEAPI_DEVICE_SELECTOR=opencl:cpu vtune --collect uarch-exploration -- ./a.out
```
## GUI例
Summary
![image](https://github.com/user-attachments/assets/95d51232-f1a1-4805-a66b-71684863b6c4)


Bottom-up
![image](https://github.com/user-attachments/assets/f618f157-f6c2-4098-92ca-04153f97f025)


